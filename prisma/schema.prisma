generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id           Int           @id @default(autoincrement())
  nome         String
  email        String        @unique
  despesas     Despesa[]
  funcionarios Funcionario[]
  produtos     Produto[]
  vendas       Venda[]
  regioes      Regiao[]      @relation("RegiaoToUsuario")
}

model Produto {
  id         Int         @id @default(autoincrement())
  picture    String?
  nome       String
  descricao  String
  categoria  String
  preco      Float
  usuarioId  Int?
  itensVenda ItemVenda[]
  usuario    Usuario?    @relation(fields: [usuarioId], references: [id])
}

model Regiao {
  id        Int       @id @default(autoincrement())
  picture   String?
  nome      String
  descricao String
  endereco  String?
  cidade    String
  vendas    Venda[]
  usuarios  Usuario[] @relation("RegiaoToUsuario")
}

model Funcionario {
  id                Int      @id @default(autoincrement())
  img_funcionario   String?
  nome              String
  email             String
  descricao         String?
  endereco          String
  localAtuacao      String
  genero            String
  cpf               String
  dataContratacao   DateTime
  telefone          String
  formacaoAcademica String
  linkedin          String?
  github            String?
  usuarioId         Int
  usuario           Usuario  @relation(fields: [usuarioId], references: [id])
  vendas            Venda[]
}

model Despesa {
  id        Int      @id @default(autoincrement())
  nome      String
  data      DateTime
  descricao String?
  tipo      String
  valor     Float
  usuarioId Int?
  usuario   Usuario? @relation(fields: [usuarioId], references: [id])
}

model Venda {
  ID_venda           Int         @id @default(autoincrement())
  Data               String
  funcionarioId      Int
  valor              Float
  quantidadeProdutos Int
  comprador          String
  regiaoId           Int
  formaPagamento     String
  usuarioId          Int
  itensVenda         ItemVenda[]
  funcionario        Funcionario @relation(fields: [funcionarioId], references: [id])
  regiao             Regiao      @relation(fields: [regiaoId], references: [id])
  usuario            Usuario     @relation(fields: [usuarioId], references: [id])
}

model ItemVenda {
  id         Int     @id @default(autoincrement())
  produtoId  Int
  quantidade Int
  vendaId    Int
  produto    Produto @relation(fields: [produtoId], references: [id])
  venda      Venda   @relation(fields: [vendaId], references: [ID_venda])
}
